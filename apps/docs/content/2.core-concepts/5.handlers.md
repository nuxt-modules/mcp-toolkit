---
title: Handlers
description: Create custom MCP endpoints with their own tools, resources, and prompts.
navigation:
  icon: i-lucide-server
seo:
  title: Handlers
  description: Create custom MCP endpoints with defineMcpHandler for multiple MCP servers in one application.
---

## What are Handlers?

Handlers allow you to create **multiple MCP endpoints** in a single Nuxt application. Each handler has its own route, name, version, and can include its own set of tools, resources, and prompts.

This is useful when you want to:
- Separate different MCP functionalities into different endpoints
- Create versioned MCP APIs
- Organize tools/resources by domain or feature

## Default Handler

By default, the module creates a single MCP endpoint at `/mcp` (or your configured route) that includes all tools, resources, and prompts from the `server/mcp/` directory.

### Overriding the Default Handler

You can override the default handler's configuration by creating an `index.ts` file in `server/mcp/`:

```typescript [server/mcp/index.ts]
export default defineMcpHandler({
  version: '2.0.0',
  browserRedirect: '/docs',
  // If tools/resources/prompts not specified, uses global definitions
})
```

This allows you to customize:
- `version` - Override the server version
- `browserRedirect` - Override the browser redirect URL
- `name` - Override the server name (optional)
- `tools`, `resources`, `prompts` - Use specific definitions instead of global ones

::callout{icon="i-lucide-info" color="info"}
The `route` property is **ignored** for the default handler. To change the route, use `mcp.route` in your `nuxt.config.ts`.
::

#### Example: Custom Version and Redirect

```typescript [server/mcp/index.ts]
export default defineMcpHandler({
  name: 'My Documentation MCP',
  version: '1.2.0',
  browserRedirect: '/getting-started',
})
```

#### Example: Limiting Exposed Tools

```typescript [server/mcp/index.ts]
import { myTool, anotherTool } from './tools/my-tools'

export default defineMcpHandler({
  // Only expose specific tools instead of all tools in server/mcp/tools/
  tools: [myTool, anotherTool],
})
```

## Custom Handlers

Create custom handlers using `defineMcpHandler`:

```typescript [server/mcp/migration.ts]
import { z } from 'zod'
import { defineMcpTool, defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

const migrationTool = defineMcpTool({
  name: 'migrate-v3-to-v4',
  title: 'Migrate v3 to v4',
  description: 'Migrate code from version 3 to version 4',
  inputSchema: {
    code: z.string().describe('The code to migrate'),
  },
  handler: async ({ code }) => {
    const migrated = code.replace(/v3/g, 'v4')
    return {
      content: [{
        type: 'text',
        text: migrated,
      }],
    }
  },
})

export default defineMcpHandler({
  name: 'migration',
  version: '0.1.0',
  route: '/mcp/migration',
  tools: [migrationTool],
  browserRedirect: '/',
})
```

## Handler Structure

A handler definition consists of:

::code-group

```typescript [Required Fields]
import { defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

export default defineMcpHandler({
  name: 'handler-name',  // Unique identifier
})
```

```typescript [Optional Fields]
import { defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

export default defineMcpHandler({
  name: 'handler-name',
  version: '1.0.0',              // Handler version
  route: '/mcp/custom',          // Custom route
  browserRedirect: '/',          // Browser redirect URL
  tools: [ ... ],                 // Array of tools
  resources: [ ... ],            // Array of resources
  prompts: [ ... ],               // Array of prompts
})
```

::

## Handler Options

### `name` (required)

Unique identifier for the handler. The `name` determines where the handler will be mounted. By default, the handler will be accessible at `/mcp/:name`.

```typescript
import { defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

export default defineMcpHandler({
  name: 'migration', // Handler mounted at /mcp/migration
})
```

### `version` (optional)

Version of the handler. Defaults to the module's configured version.

```typescript
import { defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

export default defineMcpHandler({
  name: 'migration',
  version: '2.0.0',
})
```

### `route` (optional)

Custom route for the handler. Defaults to `/mcp/:name`.

::callout{icon="i-lucide-info" color="info"}
This option is only used for **custom handlers**. For the default handler override (`index.ts`), use `mcp.route` in `nuxt.config.ts` instead.
::

```typescript
import { defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

export default defineMcpHandler({
  name: 'migration',
  route: '/api/mcp/migration', // Custom route
})
```

### `browserRedirect` (optional)

URL to redirect browsers when they access the handler endpoint. Defaults to the module's configured `browserRedirect`.

```typescript
import { defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

export default defineMcpHandler({
  name: 'migration',
  browserRedirect: '/docs/migration',
})
```

### `tools` (optional)

Array of tool definitions specific to this handler.

```typescript
import { defineMcpTool, defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

const tool1 = defineMcpTool({ ... })
const tool2 = defineMcpTool({ ... })

export default defineMcpHandler({
  name: 'custom',
  tools: [tool1, tool2],
})
```

### `resources` (optional)

Array of resource definitions specific to this handler.

```typescript
import { defineMcpResource, defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

const resource1 = defineMcpResource({ ... })
const resource2 = defineMcpResource({ ... })

export default defineMcpHandler({
  name: 'custom',
  resources: [resource1, resource2],
})
```

### `prompts` (optional)

Array of prompt definitions specific to this handler.

```typescript
import { defineMcpPrompt, defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

const prompt1 = defineMcpPrompt({ ... })
const prompt2 = defineMcpPrompt({ ... })

export default defineMcpHandler({
  name: 'custom',
  prompts: [prompt1, prompt2],
})
```

## Complete Example

Here's a complete example of a custom handler:

```typescript [server/mcp/api-handler.ts]
import { z } from 'zod'
import { defineMcpTool, defineMcpResource, defineMcpPrompt, defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

// Define tools for this handler
const getUserTool = defineMcpTool({
  name: 'get-user',
  description: 'Get user information',
  inputSchema: {
    userId: z.string(),
  },
  handler: async ({ userId }) => {
    const user = await db.users.find(userId)
    return {
      content: [{
        type: 'text',
        text: JSON.stringify(user),
      }],
    }
  },
})

const createUserTool = defineMcpTool({
  name: 'create-user',
  description: 'Create a new user',
  inputSchema: {
    name: z.string(),
    email: z.string().email(),
  },
  handler: async ({ name, email }) => {
    const user = await db.users.create({ name, email })
    return {
      content: [{
        type: 'text',
        text: `User created: ${user.id}`,
      }],
    }
  },
})

// Define resources for this handler
const userResource = defineMcpResource({
  name: 'user',
  uri: 'api://users/{id}',
  handler: async (uri, variables) => {
    const id = variables.id as string
    const user = await db.users.find(id)
    return {
      contents: [{
        uri: uri.toString(),
        mimeType: 'application/json',
        text: JSON.stringify(user),
      }],
    }
  },
})

// Define prompts for this handler
const userPrompt = defineMcpPrompt({
  name: 'user-help',
  description: 'Get help with user operations',
  handler: async () => {
    return {
      messages: [{
        role: 'user',
        content: {
          type: 'text',
          text: 'How can I manage users?',
        },
      }],
    }
  },
})

// Export the handler
export default defineMcpHandler({
  name: 'api',
  version: '1.0.0',
  route: '/mcp/api',
  tools: [getUserTool, createUserTool],
  resources: [userResource],
  prompts: [userPrompt],
  browserRedirect: '/docs/api',
})
```

## Multiple Handlers

You can create multiple handlers in your application:

```
server/
└── mcp/
    ├── migration.ts          # Migration handler
    ├── api-handler.ts        # API handler
    ├── admin-handler.ts      # Admin handler
    ├── tools/
    │   └── echo.ts           # Default handler tools
    ├── resources/
    │   └── readme.ts         # Default handler resources
    └── prompts/
        └── greeting.ts       # Default handler prompts
```

Each handler file should export a default handler definition:

```typescript [server/mcp/migration.ts]
import { defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

export default defineMcpHandler({
  name: 'migration',
  tools: [ ... ],
})
```

```typescript [server/mcp/api-handler.ts]
import { defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

export default defineMcpHandler({
  name: 'api',
  tools: [ ... ],
})
```

## Handler Routes

The handler's `name` determines where it will be mounted. By default, handlers are accessible at `/mcp/:name` where `:name` is the handler's name:

- Handler with `name: 'migration'` → mounted at `/mcp/migration`
- Handler with `name: 'api'` → mounted at `/mcp/api`
- Handler with `name: 'admin'` → mounted at `/mcp/admin`

You can also specify a custom route to override the default:

```typescript
import { defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

export default defineMcpHandler({
  name: 'api',
  route: '/api/mcp/v1', // Custom route instead of /mcp/api
})
```

## Default vs Custom Handlers

::prose-table
| Feature | Default Handler | Default Handler Override (`index.ts`) | Custom Handler |
|---------|----------------|--------------------------------------|----------------|
| Route | `/mcp` (via config) | `/mcp` (via config) | `/mcp/:name` (or custom route) |
| Tools | From `server/mcp/tools/` | Custom or global | Defined in handler |
| Resources | From `server/mcp/resources/` | Custom or global | Defined in handler |
| Prompts | From `server/mcp/prompts/` | Custom or global | Defined in handler |
| Name | From config | Custom or config | Handler name (required) |
| Version | From config | Custom or config | Handler version |

::

## Use Cases

### 1. Feature Separation

Separate different features into different handlers:

```typescript [server/mcp/user-management.ts]
import { defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

export default defineMcpHandler({
  name: 'users',
  tools: [getUserTool, createUserTool, updateUserTool],
})
```

```typescript [server/mcp/content-management.ts]
import { defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

export default defineMcpHandler({
  name: 'content',
  tools: [createPostTool, updatePostTool, deletePostTool],
})
```

### 2. Versioned APIs

Create versioned handlers:

```typescript [server/mcp/api-v1.ts]
import { defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

export default defineMcpHandler({
  name: 'api-v1',
  version: '1.0.0',
  route: '/api/v1/mcp',
  tools: [ ... ],
})
```

```typescript [server/mcp/api-v2.ts]
import { defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

export default defineMcpHandler({
  name: 'api-v2',
  version: '2.0.0',
  route: '/api/v2/mcp',
  tools: [ ... ],
})
```

### 3. Domain-Specific Handlers

Organize by domain:

```typescript [server/mcp/ecommerce.ts]
import { defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

export default defineMcpHandler({
  name: 'ecommerce',
  tools: [addToCartTool, checkoutTool, getProductsTool],
})
```

```typescript [server/mcp/analytics.ts]
import { defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

export default defineMcpHandler({
  name: 'analytics',
  tools: [getStatsTool, generateReportTool],
})
```

## Sharing Tools Between Handlers

You can share tool definitions between handlers by exporting them from a separate file:

```typescript [server/mcp/shared-tools.ts]
import { z } from 'zod'
import { defineMcpTool } from '@nuxtjs/mcp-toolkit' // optional

export const sharedTool = defineMcpTool({
  name: 'shared-tool',
  description: 'A shared tool',
  inputSchema: {
    input: z.string(),
  },
  handler: async ({ input }) => {
    return {
      content: [{
        type: 'text',
        text: `Shared: ${input}`,
      }],
    }
  },
})
```

```typescript [server/mcp/handler1.ts]
import { sharedTool } from './shared-tools'
import { defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

export default defineMcpHandler({
  name: 'handler1',
  tools: [sharedTool],
})
```

```typescript [server/mcp/handler2.ts]
import { sharedTool } from './shared-tools'
import { defineMcpHandler } from '@nuxtjs/mcp-toolkit' // optional

export default defineMcpHandler({
  name: 'handler2',
  tools: [sharedTool],
})
```

## File Organization

Organize handlers in your `server/mcp/` directory:

```
server/
└── mcp/
    ├── index.ts              # Default handler override (optional)
    ├── migration.ts          # Custom handler
    ├── api-handler.ts        # Custom handler
    ├── admin.ts              # Custom handler
    ├── shared-tools.ts       # Shared tool definitions
    ├── tools/
    │   └── # Tools for default handler
    ├── resources/
    │   └── # Resources for default handler
    └── prompts/
        └── # Prompts for default handler
```

::callout{icon="i-lucide-lightbulb" color="primary"}
The `index.ts` file is special - it overrides the default handler configuration instead of creating a new custom handler.
::

## Best Practices

1. **Use descriptive names**: Make handler names clear and specific
2. **Group related functionality**: Put related tools/resources together
3. **Version your handlers**: Use semantic versioning for handler versions
4. **Document your handlers**: Add comments explaining what each handler does
5. **Keep handlers focused**: Each handler should have a clear, single purpose

## Next Steps

- [Configuration](/getting-started/configuration) - Configure the default handler
- [Tools](/core-concepts/tools) - Create tools for your handlers
- [Examples](/examples/common-patterns) - See more handler examples
