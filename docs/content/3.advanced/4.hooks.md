---
title: Hooks
description: Use Nuxt hooks to extend and customize the MCP module.
navigation:
  icon: i-lucide-webhook
seo:
  title: Hooks - Nuxt MCP Module
  description: Use hooks to extend MCP definitions paths and customize behavior.
---

## Available Hooks

The Nuxt MCP module provides hooks for extending and customizing behavior.

## `mcp:definitions:paths`

This hook allows you to add additional directories to scan for MCP definitions.

### Hook Signature

```typescript
nuxt.hook('mcp:definitions:paths', (paths: {
  tools: string[]
  resources: string[]
  prompts: string[]
  handlers: string[]
}) => {
  // Modify paths
})
```

### Usage in nuxt.config.ts

```typescript [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['@hrcd/mcp'],
  hooks: {
    'mcp:definitions:paths'(paths) {
      // Add additional tool directories
      paths.tools.push('shared/tools')
      paths.tools.push('legacy/tools')

      // Add additional resource directories
      paths.resources.push('shared/resources')

      // Add additional prompt directories
      paths.prompts.push('shared/prompts')

      // Add additional handler directories
      paths.handlers.push('custom/handlers')
    },
  },
})
```

### Usage in a Custom Module

```typescript [my-module.ts]
export default defineNuxtModule({
  setup(options, nuxt) {
    nuxt.hook('mcp:definitions:paths', (paths) => {
      // Add paths from this module
      paths.tools.push('my-module/tools')
      paths.resources.push('my-module/resources')
      paths.prompts.push('my-module/prompts')
    })
  },
})
```

## Path Structure

The `paths` object contains arrays of directory paths:

```typescript
{
  tools: string[]      // Directories to scan for tools
  resources: string[]  // Directories to scan for resources
  prompts: string[]    // Directories to scan for prompts
  handlers: string[]  // Directories to scan for handlers
}
```

All paths are relative to the `server/` directory of each Nuxt layer.

## Examples

### Adding Shared Definitions

```typescript [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['@hrcd/mcp'],
  hooks: {
    'mcp:definitions:paths'(paths) {
      // Include shared definitions from project root
      paths.tools.push('../../shared/mcp/tools')
      paths.resources.push('../../shared/mcp/resources')
      paths.prompts.push('../../shared/mcp/prompts')
    },
  },
})
```

### Multiple Source Directories

```typescript [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['@hrcd/mcp'],
  hooks: {
    'mcp:definitions:paths'(paths) {
      // Scan multiple directories
      paths.tools.push('legacy-tools')
      paths.tools.push('new-tools')
      paths.tools.push('experimental-tools')
    },
  },
})
```

### Layer-Specific Paths

```typescript [layers/api/nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['@hrcd/mcp'],
  hooks: {
    'mcp:definitions:paths'(paths) {
      // Override default paths for this layer
      paths.tools = ['api/tools']
      paths.resources = ['api/resources']
      paths.prompts = ['api/prompts']
    },
  },
})
```

### Conditional Paths

```typescript [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['@hrcd/mcp'],
  hooks: {
    'mcp:definitions:paths'(paths) {
      // Add paths conditionally
      if (process.env.NODE_ENV === 'development') {
        paths.tools.push('dev-tools')
      }

      if (process.env.ENABLE_EXPERIMENTAL === 'true') {
        paths.tools.push('experimental-tools')
      }
    },
  },
})
```

## Path Resolution

Paths are resolved in the following order:

1. **Relative to `server/`**: Paths like `'tools'` resolve to `server/tools/`
2. **Absolute paths**: Paths starting with `/` resolve from project root
3. **Layer-specific**: Each Nuxt layer resolves paths relative to its own `server/` directory

## Best Practices

1. **Use descriptive paths**: Make it clear what each path contains
2. **Document custom paths**: Add comments explaining why paths are added
3. **Test path resolution**: Ensure paths resolve correctly in all environments
4. **Consider layer structure**: Use layers for complex multi-app setups
5. **Avoid duplicates**: Don't add the same path multiple times

## Advanced Usage

### Dynamic Path Discovery

```typescript [nuxt.config.ts]
import { readdir } from 'node:fs/promises'
import { join } from 'node:path'

export default defineNuxtConfig({
  modules: ['@hrcd/mcp'],
  hooks: {
    async 'mcp:definitions:paths'(paths) {
      // Dynamically discover tool directories
      const toolDirs = await readdir('server/mcp', { withFileTypes: true })

      for (const dir of toolDirs) {
        if (dir.isDirectory() && dir.name.startsWith('tools-')) {
          paths.tools.push(join('mcp', dir.name))
        }
      }
    },
  },
})
```

### Path Filtering

```typescript [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['@hrcd/mcp'],
  hooks: {
    'mcp:definitions:paths'(paths) {
      // Filter out certain paths
      paths.tools = paths.tools.filter(path =>
        !path.includes('deprecated')
      )
    },
  },
})
```

## Next Steps

- [Custom Paths](/advanced/custom-paths) - Learn more about customizing paths
- [Multiple Handlers](/advanced/multiple-handlers) - Create multiple MCP endpoints
- [Configuration](/core-concepts/configuration) - Configure the module
